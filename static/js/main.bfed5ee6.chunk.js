(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{167:function(t,e,n){},171:function(t,e,n){},229:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),c=n(11),o=n.n(c);n(167),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,r,d=n(258),l=n(259),u=n(256),j=n(260),b=n(261),O=n(18),f=n(69),h=n(15),T=(n(171),n(7)),m=n(265),p=n(262),g=n(138),v=n.n(g).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"177f53f8-d824-4924-842c-454e53dc1655"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(s||(s={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var I=function(){return v.get("todo-lists")},x=function(t){return v.post("todo-lists",{title:t})},S=function(t){return v.delete("todo-lists/".concat(t))},k=function(t,e){return v.put("todo-lists/".concat(t),{title:e})},C=function(t){return v.get("todo-lists/".concat(t,"//tasks"))},E=function(t,e){return v.post("todo-lists/".concat(t,"/tasks"),{title:e})},y=function(t,e,n){return v.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},A=function(t,e){return v.delete("todo-lists/".concat(t,"/tasks/").concat(e))},L=function(t){return v.post("auth/login",t)},w=function(){return v.delete("auth/login")},D=function(){return v.get("auth/me")},N=function(t,e){t.messages.length?e(H(t.messages[0])):e(H("Some error occurred")),e(M("failed"))},P=function(t,e){e(H(t.message?t.message:"Some error occurred")),e(M("failed"))},F={isLoggedIn:!1},R=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},G={status:"loading",error:null,isInitialized:!1},H=function(t){return{type:"APP/SET-ERROR",error:t}},M=function(t){return{type:"APP/SET-STATUS",status:t}},K=n(4);function U(t){return Object(K.jsx)(p.a,Object(T.a)({elevation:6,variant:"filled"},t))}function _(){var t=Object(O.c)((function(t){return t.app.error})),e=Object(O.b)(),n=function(t,n){"clickaway"!==n&&e(H(null))};return Object(K.jsx)(m.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(K.jsx)(U,{onClose:n,severity:"error",children:t})})}var V=n(234),z=n(53),Z=n(253),Y=n(128),q=n(254),B=a.a.memo((function(t){var e=t.addItem,n=t.disabled,a=void 0!==n&&n,c=Object(i.useState)(""),o=Object(z.a)(c,2),s=o[0],r=o[1],d=Object(i.useState)(null),l=Object(z.a)(d,2),u=l[0],j=l[1];function b(){""!==s.trim()?(e(s),r("")):j("field is required")}return Object(K.jsxs)("div",{children:[Object(K.jsx)(Z.a,{variant:"outlined",value:s,disabled:a,label:"\u0417\u0430\u0434\u0430\u0447\u0430",error:!!u,helperText:u,onChange:function(t){r(t.currentTarget.value)},onKeyPress:function(t){u&&j(null),13===t.charCode&&(b(),r(""))}}),Object(K.jsx)(Y.a,{onClick:b,color:"primary",disabled:a,children:Object(K.jsx)(q.a,{})})]})})),W=n(47),J=n(84),$={},Q=[],X=n(154),tt=n(255),et=a.a.memo((function(t){var e=Object(i.useState)(!1),n=Object(z.a)(e,2),a=n[0],c=n[1],o=Object(i.useState)(""),s=Object(z.a)(o,2),r=s[0],d=s[1];return a?Object(K.jsx)(Z.a,{value:r,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){c(!1),t.onChange(r)}}):Object(K.jsxs)("span",{onDoubleClick:function(){c(!0),d(t.title)},children:[" ",t.title," "]})})),nt=n(263),it=a.a.memo((function(t){var e=t.task,n=t.changeTask1Title,i=t.changeTasks,a=t.removeTasks;return Object(K.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:e.status?"isDone":"",children:[Object(K.jsx)(nt.a,{checked:e.status===s.Completed,onChange:function(t){var n=t.currentTarget.checked;i(e.id,n?s.Completed:s.New)}}),Object(K.jsx)(et,{title:e.title,onChange:function(t){n(e.id,t)},disabled:"loading"===e.entityStatus}),Object(K.jsx)(Y.a,{onClick:function(){a(e.id)},children:Object(K.jsx)(tt.a,{})})]},e.id)})),at=n(85),ct=n.n(at),ot=a.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,a=Object(X.a)(t,["demo"]),c=Object(O.b)();Object(i.useEffect)((function(){var t;n||c((t=a.todolist.id,function(e){e(M("loading")),C(t).then((function(n){var i=n.data.items;e(function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(i,t)),e(M("succeeded"))})).catch((function(t){P(t,e)}))}))}),[]);var o=Object(i.useCallback)((function(t){a.addTask(t,a.todolist.id)}),[]),r=Object(i.useCallback)((function(t){a.changeTodolistTitle(a.todolist.id,t)}),[a.changeTodolistTitle,a.todolist.id]),d=Object(i.useCallback)((function(){a.changeFilter("all",a.todolist.id)}),[a.changeFilter,a.todolist.id]),l=Object(i.useCallback)((function(){a.changeFilter("active",a.todolist.id)}),[a.changeFilter,a.todolist.id]),j=Object(i.useCallback)((function(){a.changeFilter("completed",a.todolist.id)}),[a.changeFilter,a.todolist.id]),b=Object(i.useCallback)((function(t,e){a.changeTask1Title(t,e,a.todolist.id)}),[a.changeTask1Title,a.todolist.id]),f=Object(i.useCallback)((function(t,e){a.changeTasks(t,e,a.todolist.id)}),[a.changeTasks,a.todolist.id]),h=Object(i.useCallback)((function(t){a.removeTasks(t,a.todolist.id)}),[a.removeTasks,a.todolist.id]),T=a.tasks;return"completed"===a.todolist.filter&&(T=a.tasks.filter((function(t){return t.status===s.Completed}))),"active"===a.todolist.filter&&(T=a.tasks.filter((function(t){return t.status===s.New}))),Object(K.jsxs)("div",{children:[Object(K.jsxs)("h3",{className:ct.a.titleTl,children:[Object(K.jsx)("span",{className:ct.a.title,children:Object(K.jsx)(et,{title:a.todolist.title,onChange:r})}),Object(K.jsx)(Y.a,{onClick:function(){a.removeTodolist(a.todolist.id)},disabled:"loading"===a.todolist.entityStatus,children:Object(K.jsx)(tt.a,{})})]}),Object(K.jsx)(B,{addItem:o,disabled:"loading"===a.todolist.entityStatus}),Object(K.jsx)("ul",{className:ct.a.list,children:T.map((function(t){return Object(K.jsx)(it,{task:t,changeTask1Title:b,changeTasks:f,removeTasks:h},a.todolist.id)}))}),Object(K.jsxs)("div",{children:[Object(K.jsx)(u.a,{variant:"all"===a.todolist.filter?"contained":"text",onClick:d,children:"All"}),Object(K.jsx)(u.a,{color:"primary",variant:"active"===a.todolist.filter?"contained":"text",onClick:l,children:"Active"}),Object(K.jsx)(u.a,{color:"secondary",variant:"completed"===a.todolist.filter?"contained":"text",onClick:j,children:"Completed"})]})]})})),st=n(257);function rt(t){var e=t.demo,n=void 0!==e&&e,a=Object(O.c)((function(t){return t.todolists})),c=Object(O.c)((function(t){return t.tasks})),o=Object(O.c)((function(t){return t.authMe.isLoggedIn})),s=Object(O.b)();Object(i.useEffect)((function(){!n&&o&&s((function(t){t(M("loading")),I().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data}),t(M("succeeded"))})).catch((function(e){P(e,t)}))}))}),[]);var r=Object(i.useCallback)((function(t,e){var n=function(t,e){return function(n){n(M("loading")),A(e,t).then((function(i){n(function(t,e){return{type:"REMOVE-TASKS",taskId:t,todolistId:e}}(t,e)),n(M("succeeded"))})).catch((function(t){P(t,n)}))}}(t,e);s(n)}),[s]),d=Object(i.useCallback)((function(t,e){var n=function(t,e){return function(n){n(M("loading")),E(e,t).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;n(function(t){return{type:"ADD-TASKS",task:t}}(e)),n(M("succeeded"))}else N(t.data,n)})).catch((function(t){P(t,n)}))}}(t,e);s(n)}),[]),l=Object(i.useCallback)((function(t,e,n){s(function(t,e,n){return function(i,a){a();var c=a().tasks[n].find((function(e){return e.id===t}));if(c){var o={title:c.title,startDate:c.startDate,priority:c.priority,description:c.description,deadline:c.deadline,status:e};i(M("loading")),y(n,t,o).then((function(t){var e=t.data.data.item;i(function(t,e,n){return{type:"CHANGE-TASKS-STATUS",taskId:t,status:e,todolistId:n}}(e.id,e.status,e.todoListId)),i(M("succeeded"))})).catch((function(t){P(t,i)}))}}}(t,e,n))}),[]),u=Object(i.useCallback)((function(t,e){s(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",todolistId:t,filter:e}}(e,t))}),[]),j=Object(i.useCallback)((function(t,e,n){s(function(t,e,n){return function(i,a){a();var c=a().tasks[n].find((function(e){return e.id===t}));if(c){var o={title:e,startDate:c.startDate,priority:c.priority,description:c.description,deadline:c.deadline,status:c.status};i(M("loading")),y(n,t,o).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;i(function(t,e,n){return{type:"CHANGE-TASKS-TITLE",taskId:t,title:e,todolistId:n}}(e.id,e.title,e.todoListId)),i(M("succeeded"))}else N(t.data,i)})).catch((function(t){P(t,i)}))}}}(t,e,n))}),[]),b=Object(i.useCallback)((function(t){var e=function(t){return function(e){e(M("loading")),x(t).then((function(t){0===t.data.resultCode?(e({type:"ADD-TODOLIST",todolist:t.data.data.item}),e(M("succeeded"))):N(t.data,e)})).catch((function(t){P(t,e)}))}}(t);s(e)}),[]),f=Object(i.useCallback)((function(t){var e=function(t){return function(e){e(M("loading")),e(function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",todolistId:t,status:"loading"}}(t)),S(t).then((function(n){e({type:"REMOVE-TODOLIST",todolistId:t}),e(M("succeeded"))})).catch((function(t){P(t,e)}))}}(t);s(e)}),[]),T=Object(i.useCallback)((function(t,e){s(function(t,e){return function(n){n(M("loading")),k(t,e).then((function(i){0===i.data.resultCode?(n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todolistId:t,newTitle:e}}(t,e)),n(M("succeeded"))):N(i.data,n)})).catch((function(t){P(t,n)}))}}(t,e))}),[]);return o?Object(K.jsxs)("div",{className:"tlList",children:[Object(K.jsx)(st.a,{container:!0,style:{padding:"20px",width:"300px"},children:Object(K.jsx)(B,{addItem:b})}),Object(K.jsx)(st.a,{container:!0,spacing:9,children:a.map((function(t){var e=c[t.id];return Object(K.jsx)(st.a,{item:!0,children:Object(K.jsx)(V.a,{style:{padding:"20px"},children:Object(K.jsx)(ot,{todolist:t,tasks:e,removeTasks:r,changeFilter:u,addTask:d,changeTasks:l,removeTodolist:f,changeTask1Title:j,changeTodolistTitle:T,demo:n},t.id)})},t.id)}))})]}):Object(K.jsx)(h.a,{to:"/login"})}var dt=n(150),lt=n.n(dt),ut=n(149),jt=n.n(ut),bt=n(145),Ot=n.n(bt),ft=n(148),ht=n.n(ft),Tt=n(147),mt=n.n(Tt),pt=n(146),gt=n.n(pt),vt=n(111),It=n.n(vt),xt=n(153),St=function(){var t=Object(O.c)((function(t){return t.authMe.isLoggedIn})),e=Object(O.b)(),n=Object(xt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="Password must be more than 3 symbols"):e.password="Required",e},onSubmit:function(t){var i;e((i=t,function(t){t(M("loading")),L(i).then((function(e){0===e.data.resultCode?(t(R(!0)),t(M("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))})),n.resetForm()}});return t?Object(K.jsx)(h.a,{to:"/"}):Object(K.jsx)(st.a,{container:!0,justify:"center",children:Object(K.jsx)(st.a,{item:!0,xs:4,children:Object(K.jsx)("form",{onSubmit:n.handleSubmit,children:Object(K.jsxs)(Ot.a,{children:[Object(K.jsxs)(gt.a,{children:[Object(K.jsxs)("p",{children:["To log in get registered",Object(K.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(K.jsx)("p",{children:"or use common test account credentials:"}),Object(K.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(K.jsx)("p",{children:"Password: free"})]}),Object(K.jsxs)(mt.a,{children:[Object(K.jsx)(It.a,Object(T.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?Object(K.jsx)("div",{style:{color:"red"},children:n.errors.email}):null,Object(K.jsx)(It.a,Object(T.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(K.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(K.jsx)(ht.a,{label:"Remember me",control:Object(K.jsx)(jt.a,Object(T.a)(Object(T.a)({},n.getFieldProps("rememberMe")),{},{checked:n.values.rememberMe}))}),Object(K.jsx)(lt.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},kt=n(151),Ct=n.n(kt);var Et=function(t){var e=t.demo,n=void 0!==e&&e,a=Object(O.c)((function(t){return t.app.status})),c=Object(O.c)((function(t){return t.app.isInitialized})),o=Object(O.c)((function(t){return t.authMe.isLoggedIn})),s=Object(O.b)();return Object(i.useEffect)((function(){s((function(t){D().then((function(e){0===e.data.resultCode&&t(R(!0))})).finally((function(){t({type:"APP/IS-INITIALIZED",isInitialized:!0})}))}))}),[]),c?Object(K.jsx)(f.a,{children:Object(K.jsxs)("div",{className:"App",children:[Object(K.jsx)(_,{}),Object(K.jsxs)(d.a,{position:"static",children:[Object(K.jsx)(l.a,{children:o&&Object(K.jsx)(u.a,{className:"btnLogOut",color:"inherit",onClick:function(){s((function(t){t(M("loading")),w().then((function(e){0===e.data.resultCode?(t(R(!1)),t(M("succeeded"))):N(e.data,t)})).catch((function(e){P(e,t)}))}))},children:"Logout"})}),"loading"===a&&Object(K.jsx)(j.a,{color:"secondary"})]}),Object(K.jsx)(b.a,{fixed:!0,children:Object(K.jsxs)(h.d,{children:[Object(K.jsx)(h.b,{exact:!0,path:"/",render:function(){return Object(K.jsx)(rt,{demo:n})}}),Object(K.jsx)(h.b,{path:"/login",render:function(){return Object(K.jsx)(St,{})}}),Object(K.jsx)(h.b,{path:"/404",render:function(){return Object(K.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(K.jsx)(h.a,{from:"*",to:"/404"})]})})]})}):Object(K.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(K.jsx)(Ct.a,{})})},yt=n(62),At=n(152),Lt=Object(yt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TASKS":var n=Object(T.a)({},t);return n[e.todolistId]=e.tasks,n;case"SET-TODOLISTS":var i=Object(T.a)({},t);return e.todolists.forEach((function(t){i[t.id]=[]})),i;case"REMOVE-TASKS":var a=Object(T.a)({},t);return a[e.todolistId]=a[e.todolistId].filter((function(t){return t.id!==e.taskId})),a;case"ADD-TASKS":var c=Object(T.a)({},t),o=c[e.task.todoListId],s=[e.task].concat(Object(J.a)(o));return c[e.task.todoListId]=s,c;case"CHANGE-TASKS-STATUS":var r=Object(T.a)({},t),d=r[e.todolistId].map((function(t){return t.id===e.taskId?Object(T.a)(Object(T.a)({},t),{},{status:e.status}):t}));return Object(T.a)(Object(T.a)({},t),{},Object(W.a)({},e.todolistId,d));case"CHANGE-TASKS-TITLE":var l=Object(T.a)({},t),u=l[e.todolistId].map((function(t){return t.id===e.taskId?Object(T.a)(Object(T.a)({},t),{},{title:e.title}):t}));return Object(T.a)(Object(T.a)({},t),{},Object(W.a)({},e.todolistId,u));case"ADD-TODOLIST":return Object(T.a)(Object(T.a)({},t),{},Object(W.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var j=Object(T.a)({},t);return delete j[e.todolistId],j;case"CHANGE-TASK-ENTITY-STATUS":var b=Object(T.a)({},t),O=b[e.todolistId].map((function(t){return t.id===e.taskId?Object(T.a)(Object(T.a)({},t),{},{entityStatus:e.status}):t}));return Object(T.a)(Object(T.a)({},t),{},Object(W.a)({},e.todolistId,O));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(T.a)(Object(T.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todolistId}));case"ADD-TODOLIST":var n=Object(T.a)(Object(T.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"});return[n].concat(Object(J.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(T.a)(Object(T.a)({},t),{},{title:e.newTitle}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todolistId?Object(T.a)(Object(T.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(T.a)(Object(T.a)({},t),{},{entityStatus:e.status}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(T.a)(Object(T.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(T.a)(Object(T.a)({},t),{},{error:e.error});case"APP/IS-INITIALIZED":return Object(T.a)(Object(T.a)({},t),{},{isInitialized:e.isInitialized});default:return t}},authMe:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(T.a)(Object(T.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),wt=Object(yt.c)(Lt,Object(yt.a)(At.a));window.store=wt,o.a.render(Object(K.jsx)(O.a,{store:wt,children:Object(K.jsx)(Et,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},85:function(t,e,n){t.exports={titleTl:"Todolist_titleTl__3fPWc",title:"Todolist_title__1dF2V",list:"Todolist_list__2Fg6o"}}},[[229,1,2]]]);
//# sourceMappingURL=main.bfed5ee6.chunk.js.map